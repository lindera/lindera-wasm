<!-- https://developer.mozilla.org/en-US/docs/WebAssembly/Rust_to_wasm -->
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Lindera WASM example</title>
  </head>
  <body>
    <h1>Lindera WASM example</h1>
    <!-- Input form -->
    <form id="form1" action="#">
      <input type="text" id="input-message">
      <p id = "b1">
        <input type="button" value="Tokenize">
      </p>
    </form>

    <!-- Result -->
    <ul id="resultList">
    </ul>
    
    <!-- JavaScript -->
    <script type="module">
      import init, {tokenize} from "./pkg/lindera_wasm.js";

      // Perform tokenization when the button is clicked
      b1.onclick = function() {
        const textbox = document.getElementById("input-message");
        const inputValue = textbox.value;
        init().then(() => {
            // Tokenize the input text
            let tokens = tokenize(inputValue);

            // Debug
            console.log(tokens);
            
            // Clear the list
            document.getElementById('resultList').innerHTML = '';

            // Display the tokens
            tokens.forEach( ( token, index ) => {
              // Debug
              console.log(index, token.get('text'));
            //   console.log(index, token.text);


              // Create a list item
              var li = document.createElement('li');
              li.textContent = token.get('text');
            //   li.textContent = token.text;
              document.getElementById('resultList').appendChild(li);
            });
          });
      }
    </script>
  </body>
</html>
